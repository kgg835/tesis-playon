<ui:composition template="../template/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="title">
		Solicitud de registro de vehículo
    </ui:define>

	<ui:define name="content">
		<h1>¡Registre el ingreso y egreso de sus clientes!</h1>
		<div id="perfil-playa">
			<h:panelGrid columns="2">
				<h:graphicImage library="fotos_perfil_playas"
					name="#{perfilPlayaMB.perfil.nombreFoto}"
					style="width:151px; height:151px; border: 2px solid black"
					rendered="#{perfilPlayaMB.perfil.nombreFoto != null}" />
				<h:graphicImage library="fotos_perfil_playas" name="sinfoto.jpg"
					style="width:151px; height:151px; border: 2px solid black"
					rendered="#{perfilPlayaMB.perfil.nombreFoto == null}" />
				<h1 style="width: 400px">#{perfilPlayaMB.perfil.playa.nombreComercial}</h1>
			</h:panelGrid>
		</div>
		<h:form>
			<p:growl id="messages" showDetail="true" autoUpdate="true"
				closable="true" />

			<div style="margin: 20px 0px 0px 50px; width: 100%;">
				Buscar vehículo
				<p:separator id="separator" />
			</div>
			<div id="perfil-playa">

				<h:panelGrid columns="3" cellpadding="5">

					<h:outputLabel for="patente" value="Ingrese la patente: "
						styleClass="fuente-outputtext" />
					<p:inputText id="patente" style="width:197px"
						value="#{ingresoEgresoMB.patente}" required="true"
						requiredMessage="Campo obligatorio">
						<f:validateLength minimum="6" />
						<p:ajax event="blur" update="patenteMsg" />
					</p:inputText>
					<p:message id="patenteMsg" for="patente" display="icon" />

					<p:commandButton id="cancelar" value="Cancelar"
						action="#{ingresoEgresoMB.limpiar}" ajax="false"
						style="margin-right:15px" />
					<p:commandButton id="buscarVehiculo" value="Buscar vehículo"
						action="#{ingresoEgresoMB.searchVehiculo}" ajax="false" />

				</h:panelGrid>

			</div>

			<div style="margin: 20px 0px 0px 50px; width: 100%;">
				Cliente
				<p:separator id="separator2" />
			</div>

			<div id="perfil-playa">
				<h:panelGrid rendered="#{ingresoEgresoMB.existeVehiculo}"
					columns="2" cellpadding="5">

					<h:outputText value="Cliente: " styleClass="fuente-outputtext" />
					<h:outputText id="txt_nombre"
						value="#{ingresoEgresoMB.usuarioCliente.nombre}&#160;#{ingresoEgresoMB.usuarioCliente.apellido}"
						styleClass="fuente-perfil" />

					<h:outputText value="Patente: " styleClass="fuente-outputtext" />
					<h:outputText id="txt_patente"
						value="#{ingresoEgresoMB.vehiculo.patente}"
						styleClass="fuente-perfil" />

					<h:outputText value="Vehiculo: " styleClass="fuente-outputtext" />
					<h:outputText id="txt_mod_vehiculo"
						value="#{ingresoEgresoMB.modeloVehiculo.nombre}&#160;#{ingresoEgresoMB.marcaVehiculo.nombre}"
						styleClass="fuente-perfil" />

					<h:outputText value="Tipo: " styleClass="fuente-outputtext" />
					<h:outputText id="txt_cat_vehiculo"
						value="#{ingresoEgresoMB.categoriaVehiculo.nombre}"
						styleClass="fuente-perfil" />

					<h:outputText value="Saldo: " styleClass="fuente-outputtext" />
					<h:outputText id="txt_saldo"
						value="$#{ingresoEgresoMB.cuentaCliente.saldo}"
						styleClass="fuente-perfil" />

					<h:outputText rendered="#{!ingresoEgresoMB.cobrado}"
						value="Fecha ingreso: " styleClass="fuente-outputtext" />
					<h:outputText rendered="#{!ingresoEgresoMB.cobrado}"
						id="txt_fecha_ingreso"
						value="#{ingresoEgresoMB.fechaIngresoFormateada}"
						styleClass="fuente-perfil" />

					<h:outputText rendered="#{!ingresoEgresoMB.cobrado}"
						value="Hora ingreso: " styleClass="fuente-outputtext" />
					<h:outputText rendered="#{!ingresoEgresoMB.cobrado}"
						id="txt_hora_ingreso"
						value="#{ingresoEgresoMB.horaIngresoFormateada}"
						styleClass="fuente-perfil" />

					<h:outputText value="Fecha actual: " styleClass="fuente-outputtext" />
					<h:outputText id="txt_fecha_actual"
						value="#{ingresoEgresoMB.fechaActualFormateada}"
						styleClass="fuente-perfil" />

					<h:outputText value="Hora actual: " styleClass="fuente-outputtext" />
					<h:outputText id="txt_hora_actual"
						value="#{ingresoEgresoMB.horaActualFormateada}"
						styleClass="fuente-perfil" />

				</h:panelGrid>
			</div>

			<h:panelGroup rendered="#{ingresoEgresoMB.cobrado}">
				<p:commandButton id="ingreso" value="Registrar ingreso"
					action="#{ingresoEgresoMB.registrarIngresoVehiculo}" ajax="false" />
			</h:panelGroup>

			<div id="perfil-playa">

				<h:panelGrid rendered="#{!ingresoEgresoMB.cobrado}" columns="2"
					cellpadding="5">

					<h:outputText for="tarifa" value="Tarifa: "
						styleClass="fuente-outputtext" />
					<p:selectOneMenu style="width: 293px"
						value="#{ingresoEgresoMB.tarifa}" effect="fade">
						<f:selectItems value="#{ingresoEgresoMB.tarifaPlayaList}"
							var="tarifa" itemValue="#{tarifa}"
							itemLabel="#{tarifa.tipoEstadia.nombre} $#{tarifa.importe}" />
						<f:converter converterId="tarifaConverter" />
					</p:selectOneMenu>

					<p:commandButton id="calcImporte" value="Calcular importe"
						action="#{ingresoEgresoMB.calcularImporte}" ajax="false" />

					<p:commandButton rendered="#{ingresoEgresoMB.importeCalculado}"
						id="egreso" value="Registrar egreso"
						action="#{ingresoEgresoMB.registrarEgresoVehiculo}" ajax="false" />

				</h:panelGrid>
			</div>

		</h:form>
	</ui:define>
</ui:composition>